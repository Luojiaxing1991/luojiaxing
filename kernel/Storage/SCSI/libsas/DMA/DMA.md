+ DMA简介
+ DMA的基本处理思路
+ DMA基本API

# DMA简介
DMA是Direct Memory Access的略称。主要用于在外设和内存之间实现数据的快速传递，在这个过程中是不需要CPU参与数据的搬运。

DMA产生的背景是因为现在CPU的速度越来越快，而外设IO的速度提升没有CPU快，如果CPU从外设读取数据，其处理效率会受限制于IO的读取速度，因此，DMA最主要的用途是让外设和内存直接进行数据交互，而不经由CPU。CPU会提前分配一个DMA缓冲区用于数据的存取，同时也会处理中断。但是在数据传递过程中，进程是睡眠的。

# DMA的基本处理思路
这里以从外设读取数据为例，数据写入外设是一样的原理

+ CPU收到进程读取外设数据的请求，或者外设通过中断通知cpu需要传输一段数据（异步DMA）。CPU会在内存中申请DMA缓冲区，并将这段缓冲区的地址告知外设。这时候进程可以选择进入睡眠，或者继续做其他事情。
+ 硬件将数据写入内存，并产生一个中断，用于通知数据已传输完毕。这种中断一般为硬件内部设计的一个event，对于驱动而言，并不会感知这是一个DMA中断，可能被定义为具体的功能中断。
+ 外设产生中断后，GIC调用驱动注册的中断回调函数，执行具体的数据存取操作。

在目前的硬件设计中，DMA的细节大部分被硬件的逻辑屏蔽，驱动的API变得简单的同时，但对于新手来说，通过驱动理解DMA变得更加困难。

![DMA base introduce](https://github.com/Luojiaxing1991/picture/blob/master/DMA_base_intr.png)

# DMA基本API
